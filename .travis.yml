sudo: true
language: rust

rust:
- stable
- beta
- nightly

os:
  - linux
  - osx
#  - windows

matrix:
  allow_failures:
    - rust: nightly

addons:
  apt:
    packages:
      - libssl-dev

cache: cargo

before_script:
- cargo install cargo-update || echo "cargo-update already installed"
- cargo install cargo-travis || echo "cargo-travis already installed"
- cargo install-update -a
- if [[ "${TRAVIS_OS_NAME}" == "linux" ]]; then
    sudo apt-get -qq update
    && sudo apt-get install -y libasound2-dev libudev-dev;
  fi

script:
- cargo build
